<!doctype html><html class="" lang=""><head>
  <meta charset="UTF-8">
  <!-- generator meta tag -->
  <!-- leave this for stats and Silex version check -->
  <meta name="generator" content="Silex v2.2.12">
  <!-- End of generator meta tag -->
  <script type="text/javascript" src="https://www.silexlabs.org/js/jquery.js"></script>
  
  
  <script type="text/javascript" src="https://www.silexlabs.org/js/front-end.js"></script>
  <link rel="stylesheet" href="https://www.silexlabs.org/css/normalize.css">
  <link rel="stylesheet" href="https://www.silexlabs.org/css/front-end.css">

  
  <script type="text/javascript" class="silex-script"></script>
  
  <title>AmfPHP 2.2 Teaser #2 Value Object Love</title>
  


<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" class="silex-custom-font"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Site silexlabs.org en Jekyll+Silex+Stastic"><meta name="twitter:description" content="Site silexlabs.org en Jekyll+Silex+Stastic"><meta name="og:description" content="Site silexlabs.org en Jekyll+Silex+Stastic"><meta name="twitter:title" content="AmfPHP 2.2 Teaser #2 Value Object Love"><meta name="og:title" content="AmfPHP 2.2 Teaser #2 Value Object Love"><meta name="twitter:site" content="@silexlabs"><link href="https://www.silexlabs.org/css/favicon.png" rel="shortcut icon"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://silexlabs.org/assets/silexlabs-wwx.jpg"><meta name="og:image" content="https://silexlabs.org/assets/silexlabs-wwx.jpg"><script src="https://www.silexlabs.org/js/script.js" type="text/javascript"></script><link href="https://www.silexlabs.org/css/styles.css" rel="stylesheet" type="text/css"><style>body { opacity: 0; transition: .25s opacity ease; }</style></head>

<body class="body-initial all-style enable-mobile prevent-resizable prevent-selectable editable-style silex-runtime silex-published" data-silex-type="container-element" style="" data-current-page="page-post">
  




























<section data-silex-type="container-element" class="prevent-resizable container-element editable-style silex-id-1563543778332-2 section-element"><div data-silex-type="container-element" class="editable-style silex-id-1563543778136-1 container-element silex-element-content website-width" style=""></div></section><section data-silex-type="container-element" class="container-element editable-style silex-id-1478366444112-1 section-element prevent-resizable" style="">
      <div data-silex-type="container-element" class="editable-style silex-element-content silex-id-1478366444112-0 container-element website-width" style=""><a href="https://www.silexlabs.org/" data-silex-type="image-element" class="editable-style silex-id-1563543746145-0 image-element" style=""><img src="https://www.silexlabs.org/assets/silexlabs.org_.2015.png" class=""></a><div data-silex-type="text-element" class="editable-style silex-id-1564083497965-0 text-element silex-component style-nav" style=""><div class="silex-element-content normal">

  <ul>

  <li>
    
    <a class="" href="https://www.silexlabs.org/">Accueil</a>
  </li>

  <li>
    
    <a class="" href="https://www.silexlabs.org/events">Evènements</a>
  </li>

  <li>
    
    <a class="" href="https://www.silexlabs.org/silexlabs">A propos</a>
  </li>

</ul>


</div></div><div data-silex-type="html-element" class="editable-style silex-id-1564093276656-2 html-element" style=""><div class="silex-element-content"><!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N48MBGD" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --></div></div></div>
  </section><section data-silex-type="container-element" class="prevent-resizable container-element editable-style silex-id-1563544245802-4 section-element hide-on-mobile page-index paged-element page-page page-posts page-post page-404 paged-element-visible"><div data-silex-type="container-element" class="editable-style silex-id-1563544245599-3 container-element silex-element-content website-width bg-shadow-top" style=""></div></section><section data-silex-type="container-element" class="container-element editable-style silex-id-1474394621033-3 section-element prevent-resizable page-page-posts page-page-post page-page-404 page-page paged-element page-posts page-post page-404 page-tags paged-element-visible" style="">
      <div data-silex-type="container-element" class="editable-style silex-element-content silex-id-1474394621032-2 container-element website-width bg-shadow" style=""><div data-silex-type="text-element" class="editable-style silex-id-1563563640945-15 text-element silex-component style-post page-page-postaaa page-page-post page-post paged-element page-page paged-element-visible" style=""><div class="silex-element-content normal">

  <article>
  <h1>AmfPHP 2.2 Teaser #2 Value Object Love</h1><div class="post-date">07 November 2013</div>
  <p><p>One of the key selling points of the AMF format is that you can use it to transmit typed objects. Previous versions of AmfPHP had a plugin, AmfphpCustomClassConverter, whose responsibility was to manage these typed objects. It did its job reasonably well, but had some limitations which have been adressed in its successor.</p>

<p><img src="/assets/a-little-love-free-creative-commons-pink-heart_l.jpg" alt="" /></p>

<h1 id="better-performance">Better performance</h1>

<p>If you use AmfPHP to transfer large amounts of typed data, you should see some significant performance increases. This is especially for <a href="http://baguetteamf.com" title="Baguette AMF, Move your data fast">Baguette AMF</a> users. One tester was sending 600 kbytes of nested objects, and was having performance
issues: Some of his requests would take 15 seconds to process. He went from 15 seconds to 5 seconds per request when installing Baguette AMF, then down to 1 second per request with this update.</p>

<p>This only works for AMF(not JSON), and should have a significant impact if you’re sending large quantities of data, even more so if the data contains nested typed objects. The technicalities are beyond the scope of this article, but might be discussed elsewhere.</p>

<h1 id="better-developer-experience">Better developer experience</h1>

<p>Vo conversion is optional. As typing is not enforced in PHP, it makes sense to do without it completely and just use anonymous objects with “_explicitType” marked to whatever type you want to send back to your client. Hence by default the Vo Converter’s default behavior when it doesn’t find a class with a certain type is just to give you an anonymous object.</p>

<p>This is fine for production, but when developing, it would be nice to be informed when a class is missing. So a new feature is the “enforceConversion” flag. If set to true, an exception is thrown when a VO class is not found. This exception contains information about what was sought, and the various possible paths where it could be found, so be sure to remove it for production.</p>

<h1 id="namespace-support">Namespace Support</h1>

<p>It is now possible to use namespaces in your Value Objects.<br />
Here is a snippet to show how you would configure the Vo Converter. the first entry in the array is the path to the folder, and the second is for the root namespace, ‘NVo’. So a “NVoMyVO” class in “NamespaceVo/MyVO.php” can be sent with a client(explicit) type “MyVO”.</p>

<p>[code]<br />
$voFolders = array();<br />
//add the folder with the namespace. 1st comes the pass, 2nd comes the namespace root.<br />
$voFolders[] = array(dirname(<strong>FILE</strong>) . ‘/NamespaceVo/’, ‘NVo’);<br />
$config-&gt;pluginsConfig[‘AmfphpVoConverter’] = array(‘voFolders’ =&gt; $voFolders);<br />
[/code]</p>

<p>Note that this is the same system as for service folders.</p>

<h1 id="better-name">Better Name</h1>

<p>Nobody knew what the custom class converter did without looking it up. It’s now called Vo Converter.</p>

<h1 id="other-goodies">Other Goodies</h1>

<ul>
  <li>The back office tells you what version of AmfPHP you’re running and whether you’re up to date. A mini RSS reader is also tucked away so that you can get AmfPHP news.</li>
  <li>You can choose to make calls from the Service Browser either in JSON or AMF.</li>
  <li>Put an @amfphpHide tag in your service or method’s comments, and it won’t appear in the back office</li>
  <li>The service browser now truncates data when it’s too much to display. This avoids you killing your browser when you’ve loaded big data in the service browser.</li>
  <li>The AmfPHPErrorHandler has been enhanced so that it does not throw exception for which reporting has been disabled.</li>
  <li>Yes we’re still working on the styling of the back office. So here’s yet another look, tell us what you think!</li>
  <li><a href="www.silexlabs.org/amfphp/documentation/upgrading-from-2-0-x-and-2-1-x-to-2-2/">A guide to migrating your config can be found here</a>.</li>
</ul>

<h1 id="thank-you">Thank You</h1>

<ul>
  <li>Thanks <a href="https://twitter.com/tomvanmechgelen">Tommie</a> for all the testing and feedback.</li>
  <li>Thanks <a href="https://www.silexlabs.org/members/danfranklinusa/">Dan Franklin</a> for the AmfphpErrorHandler suggestion and code</li>
</ul>

<p><a href="http://sourceforge.net/projects/amfphp/files/amfphp-2.2_vos.zip/download">The packaged version is available here, so please try it.</a></p>

<p><a href="https://github.com/silexlabs/amfphp-2.0/releases/tag/v2.2_vos">The code is here, if you feel like making a contribution.</a></p>

<p><a href="http://foter.com/photo/a-little-love-free-creative-commons-pink-heart/">The heart picture was taken here</a>.</p>
</p>
  
</article>


</div></div><div data-silex-type="container-element" class="editable-style container-element silex-id-1595517439711-1" style=""><a href="https://www.silexlabs.org/join" data-silex-type="text-element" class="editable-style silex-id-1563544847465-8 text-element style-button-green" style="width: 300px; min-height: 41px;"><div class="silex-element-content normal">Rejoignez nous<br></div></a><div data-silex-type="html-element" class="editable-style silex-id-1563544962714-9 html-element silex-component" style=""><div class="silex-element-content">
<ul class="share-buttons" id="id_1624149636224_143">
  
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.silexlabs.org/&amp;t=Silex Labs non profit organization" title="Share on Facebook" target="_blank"><img alt="Share on Facebook" src="https://www.silexlabs.org/assets/Facebook.png"></a></li>
  
  
  <li><a href="https://twitter.com/intent/tweet?source=https://www.silexlabs.org/&amp;text=Silex Labs non profit organization:%20https://www.silexlabs.org/&amp;via=silexlabs" target="_blank" title="Share on Twitter"><img alt="Twitt" src="https://www.silexlabs.org/assets/Twitter.png"></a></li>
  
  
  
  
  
  
  
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.silexlabs.org/&amp;title=Silex Labs non profit organization&amp;summary=Silex Labs est une association à but non lucratif reconnue d’intérêt général qui lutte depuis 2009 contre la fracture numérique, en faisant promotion des technologies libres et de la contribution.

Notre conviction : la contribution change la vie de celui qui contribue et améliore celle des autres.&amp;source=https://www.silexlabs.org/" target="_blank" title="Share on LinkedIn"><img alt="Share on LinkedIn" src="https://www.silexlabs.org/assets/LinkedIn.png"></a></li>
  
  
  
  
  <li><a href="mailto:?subject=Silex Labs non profit organization&amp;body=Silex Labs est une association à but non lucratif reconnue d’intérêt général qui lutte depuis 2009 contre la fracture numérique, en faisant promotion des technologies libres et de la contribution.

Notre conviction : la contribution change la vie de celui qui contribue et améliore celle des autres.:%20https://www.silexlabs.org/" target="_blank" title="Send email"><img alt="Send by email" src="https://www.silexlabs.org/assets/Email.png"></a></li>
  
</ul>

<style type="text/css">#id_1624149636224_143.share-buttons {list-style: none; padding: 0;}#id_1624149636224_143.share-buttons li {display: inline;}#id_1624149636224_143.share-buttons .sr-only {position: absolute; clip: rect(1px, 1px, 1px, 1px); padding: 0; border: 0; height: 1px; width: 1px; overflow: hidden;}</style>
</div></div><div data-silex-type="html-element" class="editable-style silex-id-1563554584898-11 html-element hide-on-mobile bg-shadow" style=""><div class="silex-element-content">

<div id="fb-root"></div>
<script async="" defer="" crossorigin="anonymous" src="https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&amp;version=v7.0&amp;appId=242623139095821" nonce="0Dnd4VdO" type="text/javascript"></script>

<div class="fb-page" data-href="https://www.facebook.com/silexlabs/" data-tabs="timeline" data-width="" data-height="" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true">
</div></div></div><div data-silex-type="html-element" class="editable-style silex-id-1564088083884-1 html-element hide-on-mobile max-height bg-shadow" style=""><div class="silex-element-content">


<a class="twitter-timeline" href="https://twitter.com/silexlabs?ref_src=twsrc%5Etfw"></a>
<script type="text/javascript" async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div></div></div></div>
  </section><section data-silex-type="container-element" class="container-element editable-style silex-id-1478366450713-3 section-element prevent-resizable" style="">
      <div data-silex-type="container-element" class="editable-style silex-element-content silex-id-1478366450713-2 container-element website-width bg-shadow" style="">

          <div class="editable-style silex-id-1442914737143-3 text-element style-footer" data-silex-type="text-element" style="">
              <div class="silex-element-content normal"><p><a href="https://www.silex.me/">Powered by Silex</a>, <a href="https://stastic.net/">Stastic</a> <a href="https://jekyllrb.com/">and Jekyll</a><a href="https://pages.github.com/">, </a>hosted on Github pages<a href="https://jekyllrb.com/"><br></a></p><p><a href="https://jekyllrb.com/"></a></p></div>
          </div>
      </div>
  </section><section data-silex-type="container-element" class="prevent-resizable container-element editable-style silex-id-1563544667829-6 section-element"><div data-silex-type="container-element" class="editable-style silex-id-1563544667707-5 container-element silex-element-content website-width"></div></section></body></html>